<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Admin Sales</title>
    <meta name="description" content="Sufee Admin - HTML5 Admin Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <!-- update the version number as needed -->
    <script defer src="/__/firebase/5.3.1/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/5.3.1/firebase-auth.js"></script>
    <script defer src="/__/firebase/5.3.1/firebase-firestore.js"></script>
    <script defer src="/__/firebase/5.3.1/firebase-messaging.js"></script>
    <script defer src="/__/firebase/5.3.1/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>

   
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

</head>
<body>
  

    <script>
        window.fbAsyncInit = function() {
          FB.init({
            appId      : '2235789950035472',
            cookie     : true,
            xfbml      : true,
            version    : 'v3.1'
          });
            
          FB.getLoginStatus(function(response) {
              statusChangeCallback(response);
          });


                      
        };
      
        (function(d, s, id){
           var js, fjs = d.getElementsByTagName(s)[0];
           if (d.getElementById(id)) {return;}
           js = d.createElement(s); js.id = id;
           js.src = "https://connect.facebook.net/en_US/sdk.js";
           fjs.parentNode.insertBefore(js, fjs);
         }(document, 'script', 'facebook-jssdk'));

         function statusChangeCallback(response){
           if(response.status === 'connected'){
             setElements(true);
             console.log('Logged in');
             testAPI();
           } else {
             console.log('not logged in');
             setElements(false);
           }
         };


         function checkLoginState() {
            FB.getLoginStatus(function(response) {
              statusChangeCallback(response);
            });
          };

          function testAPI(){
            console.log('firing');
            FB.api(
            '/raimediainc',
            'GET',
            {"fields":"about,fan_count"},
            function(response) {
                console.log(response);
            }
          );
          };

          function setElements(isLoggedIn){
            if(isLoggedIn){
              document.getElementById('profile').style.display = 'block';
              document.getElementById('fb-btn').style.display = 'none';
            } else {
              document.getElementById('profile').style.display = 'none';
              document.getElementById('fb-btn').style.display = 'block';
            }
          };

          function logout(){
            console.log('logout');
            FB.logout(function(response){
              setElements(false);
            });
          }
</script>



<fb:login-button 
  id="fb-btn"
  scope="public_profile,email"
  onlogin="checkLoginState();">
</fb:login-button>




<h3 id="heading">Log in to view your profile</h3>
<div id="profile">...</div>
<button id="logout" onclick="logout()">Logout</button>




</body>
</html>
